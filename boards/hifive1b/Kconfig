# Copyright (c) 2020 Inria
#
# This file is subject to the terms and conditions of the GNU Lesser
# General Public License v2.1. See the file LICENSE in the top level
# directory for more details.
#

config BOARD
    default "hifive1b" if BOARD_HIFIVE1B

config BOARD_HIFIVE1B
    bool
    default y
    select CPU_MODEL_FE310_G002
    select HAS_PERIPH_I2C
    select HAS_PERIPH_RTC
    select HAS_PERIPH_RTT
    select HAS_PERIPH_SPI
    select HAS_PERIPH_TIMER
    select HAS_PERIPH_UART
    select HAS_ARDUINO

menu "Hifive1b clock configuration"

choice "Clock source"
prompt "Clock source selection"
default CONFIG_USE_CLOCK_HFXOSC_PLL

config CONFIG_USE_CLOCK_HFXOSC_PLL
bool
prompt "PLL clocked by high frequency external oscillator (HFXOSC)"

config CONFIG_USE_CLOCK_HFXOSC
bool
prompt "Direct High frequency external oscillator (HFXOSC)"

config CONFIG_USE_CLOCK_HFROSC_PLL
bool
prompt "PLL clocked by High frequency internal oscillator (HFXOSC)"

config CONFIG_USE_CLOCK_HFROSC
bool
prompt "Direct High frequency internal oscillator (HFXOSC)"
endchoice

if CONFIG_USE_CLOCK_HFXOSC_PLL
config CONFIG_CLOCK_PLL_F
int
default 39
prompt "F: REFR multiply factor"

config CONFIG_CLOCK_PLL_Q
int
default 1
prompt "Q: VCO divide factor"
endif

if CONFIG_USE_CLOCK_HFROSC_PLL
config CONFIG_CLOCK_DESIRED_FREQUENCY
int
default 320000000
range 1000000 320000000
prompt "Desired clock frequency"
endif

if CONFIG_USE_CLOCK_HFROSC
config CONFIG_CLOCK_HFROSC_TRIM
int
default 6
range 0 31
prompt "TRIM: input frequency multiplier"

config CONFIG_CLOCK_HFROSC_DIV
int
default 1
range 0 63
prompt "DIV: output frequency divider"
endif

endmenu
