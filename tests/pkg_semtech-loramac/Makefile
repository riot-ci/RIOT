APPLICATION = pkg_semtech-loramac
include ../Makefile.tests_common

BOARD ?= b-l072z-lrwan1

BOARD_INSUFFICIENT_MEMORY := nucleo32-f031 nucleo32-f042 nucleo32-l031

BOARD_BLACKLIST := msb-430 msb-430h telosb wsn430-v1_3b wsn430-v1_4 z1

DRIVER ?= sx1276
REGION ?= EU868

# LoRaWAN provisioning values
# for OTAA join procedure
LORAMAC_DEV_EUI_DEFAULT = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
LORAMAC_APP_EUI_DEFAULT = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
LORAMAC_APP_KEY_DEFAULT = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
# for ABP join procedure
LORAMAC_APP_SKEY_DEFAULT = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
LORAMAC_NWK_SKEY_DEFAULT = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
LORAMAC_DEV_ADDR_DEFAULT = {0x00,0x00,0x00,0x00}

USEPKG += semtech-loramac
USEMODULE += $(DRIVER)

USEMODULE += shell
USEMODULE += shell_commands

CFLAGS += -DREGION_$(REGION)
CFLAGS += -DLORAMAC_DEV_EUI_DEFAULT=$(LORAMAC_DEV_EUI_DEFAULT)
CFLAGS += -DLORAMAC_APP_EUI_DEFAULT=$(LORAMAC_APP_EUI_DEFAULT)
CFLAGS += -DLORAMAC_APP_KEY_DEFAULT=$(LORAMAC_APP_KEY_DEFAULT)
CFLAGS += -DLORAMAC_APP_SKEY_DEFAULT=$(LORAMAC_APP_SKEY_DEFAULT)
CFLAGS += -DLORAMAC_NWK_SKEY_DEFAULT=$(LORAMAC_NWK_SKEY_DEFAULT)
CFLAGS += -DLORAMAC_DEV_ADDR_DEFAULT=$(LORAMAC_DEV_ADDR_DEFAULT)

include $(RIOTBASE)/Makefile.include
